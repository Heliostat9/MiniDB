# üß¨ MiniDB

**MiniDB** ‚Äî —ç—Ç–æ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è in-memory –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –Ω–∞ Go —Å –±–∏–Ω–∞—Ä–Ω–æ–π —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –Ω–∞ –¥–∏—Å–∫.
–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–≤–∞–ª—Å—è —Å –Ω—É–ª—è ‚Äî –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –¥–≤–∏–∂–∫–æ–≤, —á—Ç–æ–±—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ª–æ–≥–∏–∫—É.
–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É –∏ –∫–æ–º–∞–Ω–¥–∞–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ [docs/usage.md](docs/usage.md).

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìù –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü —Å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏
- üì• –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –≤ —Ç–∞–±–ª–∏—Ü—É
- üõ† –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π
- üíæ –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü –≤ –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª
- üìÇ –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–±–ª–∏—Ü –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (persist –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏)
- üìú –ñ—É—Ä–Ω–∞–ª WAL –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–±–æ–µ–≤
- üîê Magic header –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–µ—Ä—Å–∏–π —Ñ–æ—Ä–º–∞—Ç–∞ —Ñ–∞–π–ª–∞
- –í–µ—Ä—Å–∏—è v3 —Ö—Ä–∞–Ω–∏—Ç —Å—á—ë—Ç—á–∏–∫–∏ —Å—Ç—Ä–æ–∫ –≤ 64 –±–∏—Ç–∞—Ö
- ‚öôÔ∏è –ù–∞–ø–∏—Å–∞–Ω —á–∏—Å—Ç–æ –Ω–∞ Go (–±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
- üìä –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–æ–≤ INT, FLOAT, BOOL –∏ TEXT
- üì§ –≠–∫—Å–ø–æ—Ä—Ç —Ç–∞–±–ª–∏—Ü –≤ SQL-–¥–∞–º–ø

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

–§–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è:

| Magic Header | Version | Table 1 | Table 2 | ‚Ä¶ |

–ö–∞–∂–¥–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤–∫–ª—é—á–∞–µ—Ç:
- –ò–º—è —Ç–∞–±–ª–∏—Ü—ã
- –ö–æ–ª–æ–Ω–∫–∏
- –ö–æ–ª-–≤–æ —Å—Ç—Ä–æ–∫
- –°—Ç—Ä–æ–∫–∏ —Å –¥–∞–Ω–Ω—ã–º–∏
- –ñ—É—Ä–Ω–∞–ª WAL —Ö—Ä–∞–Ω–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –≤ `data.wal` –∏ –ø–µ—Ä–µ–∏–≥—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

---

## üíª –î–æ—Å—Ç—É–ø–Ω—ã–µ CLI-–∫–æ–º–∞–Ω–¥—ã

–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã:
```sql
CREATE TABLE <table_name> (, , ‚Ä¶)
```

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü—É:
```sql
INSERT INTO <table_name> VALUES (, , ‚Ä¶)
```

–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π –∏–∑ —Ç–∞–±–ª–∏—Ü—ã:
```sql
SELECT * FROM <table_name>
```

–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π:
```sql
UPDATE <table_name> SET <column>='<value>' WHERE <column>='<cond>'
```

–≠–∫—Å–ø–æ—Ä—Ç –≤ SQL-–¥–∞–º–ø:
```sql
DUMP [filename]
```

–í—ã—Ö–æ–¥ –∏–∑ –ë–î:
```sql
EXIT
```
### üß† –ü—Ä–∏–º–µ—Ä

```sql
CREATE TABLE users (id, name, email)
CREATE TABLE metrics (score FLOAT, active BOOL)
INSERT INTO users VALUES (1, Alice, alice@example.com)
INSERT INTO metrics VALUES (3.14, true)
SELECT * FROM metrics
```

### üßÆ –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

```sql
CREATE TABLE demo (
    n INT,
    rating FLOAT,
    active BOOL,
    note TEXT
)
INSERT INTO demo VALUES (42, 4.5, true, 'hello')
SELECT * FROM demo
```

## üõ† –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
go run main.go
```


> –ù–∞ —Ç–µ–∫—É—â–µ–º —ç—Ç–∞–ø–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã (main.go), –¥–∞–ª–µ–µ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å CLI / SQL-–ø–∞—Ä—Å–µ—Ä.

## üîÑ CI/CD

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ GitHub Actions –ø—Ä–∏ –ø—É—à–µ –∏ pull request –≤ –≤–µ—Ç–∫—É `main`.

## üõ† –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `golangci-lint` –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- `pre-commit` —Ö—É–∫–∏ —Å `gofmt`, `govet` –∏ `golangci-lint`
- `Makefile` —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ `make test`, `make lint`, `make coverage`
- `Dockerfile` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- –æ—Ç—á—ë—Ç—ã –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ —Ç–µ—Å—Ç–∞–º–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–∞–∫ artifacts
- —Ç—Ä–µ–±—É–µ—Ç Go >=1.24

## üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
make test  # –≤—ã–ø–æ–ª–Ω–∏—Ç—å unit-—Ç–µ—Å—Ç—ã
make lint  # –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä
```

## üê≥ –ó–∞–ø—É—Å–∫ –≤ Docker

```bash
docker build -t minidb .
docker run -it --rm minidb
```

## üß± –ü—Ä–∏–º–µ—Ä API (–≤ –∫–æ–¥–µ)

```go
CreateTable("users", []string{"id INT", "name TEXT", "email TEXT"})
InsertRow("users", []string{"1", "Alice", "alice@example.com"})
SaveBinaryDB() // —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ —Ñ–∞–π–ª
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å `database/sql`

```go
import (
    "database/sql"
    _ "minisql/driver"
)

db, _ := sql.Open("minidb", "")
defer db.Close()
db.Exec("CREATE TABLE demo (id INT, name TEXT)")
db.Exec("INSERT INTO demo VALUES (1, 'Alice')")
row := db.QueryRow("SELECT * FROM demo")
```
–î—Ä–∞–π–≤–µ—Ä —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ –∫–æ–º–∞–Ω–¥–æ–π `go get <repo>/driver`, –≥–¥–µ `<repo>` ‚Äî –ø—É—Ç—å –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é.

## üìÅ –§–∞–π–ª –¥–∞–Ω–Ω—ã—Ö

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ñ–∞–π–ª data.mdb (–±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç).

## üìã –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ
- SQL-–ø–∞—Ä—Å–∏–Ω–≥ (SELECT, INSERT, WHERE)
- CLI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –¢–µ—Å—Ç—ã
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π, –º–µ–Ω—è–π, —É–ª—É—á—à–∞–π ‚úåÔ∏è

## ü§ù –ê–≤—Ç–æ—Ä

> –ê—Ä—Ç–µ–º –•–∏—Ç—Ä–∏–Ω
Github: [Heliostat9](https://github.com/Heliostat9)
TG: [@heliostat](https://t.me/heliostat)
